import copy


class draw_board_ascii:
    def __init__(self):
        self.board_repr = [
            ['|F', '|1', '|2', '|3', '|4', '|5', '|6', '|7', '|8', '|9', '|G'],
            ['9|', '**', '**', '**', '**', '**', '**', '**', '**', '**', '|1'],
            ['8|', '**', '**', '**', '**', '**', '**', '**', '**', '**', '|2'],
            ['7|', '**', '**', '**', '**', '**', '**', '**', '**', '**', '|3'],
            ['6|', '**', '**', '**', '**', '**', '**', '**', '**', '**', '|4'],
            ['5|', '**', '**', '<M', 'ON', 'OP', 'OL', 'Y>', '**', '**', '|5'],
            ['4|', '**', '**', '**', '**', '**', '**', '**', '**', '**', '|6'],
            ['3|', '**', '**', '**', '**', '**', '**', '**', '**', '**', '|7'],
            ['2|', '**', '**', '**', '**', '**', '**', '**', '**', '**', '|8'],
            ['1|', '**', '**', '**', '**', '**', '**', '**', '**', '**', '|9'],
            ['|P', '|9', '|8', '|7', '|6', '|5', '|4', '|3', '|2', '|1', '<-']
        ]

        self.pos_encodings = {
            # lower row
            0: (-1, 10),
            1: (-1, 9),
            2: (-1, 8),
            3: (-1, 7),
            4: (-1, 6),
            5: (-1, 5),
            6: (-1, 4),
            7: (-1, 3),
            8: (-1, 2),
            9: (-1, 1),
            10: (-1, 0),
            # left comlumn
            11: (9, 0),
            12: (8, 0),
            13: (7, 0),
            14: (6, 0),
            15: (5, 0),
            16: (4, 0),
            17: (3, 0),
            18: (2, 0),
            19: (1, 0),
            20: (0, 0),
            # top row
            21: (0, 1),
            22: (0, 2),
            23: (0, 3),
            24: (0, 4),
            25: (0, 5),
            26: (0, 6),
            27: (0, 7),
            28: (0, 8),
            29: (0, 9),
            30: (0, 10),
            # right column
            31: (1, -1),
            32: (2, -1),
            33: (3, -1),
            34: (4, -1),
            35: (5, -1),
            36: (6, -1),
            37: (7, -1),
            38: (8, -1),
            39: (9, -1),
               }

    def draw(self, players: list):
        """ Draws acsii representation of board, indoicating players as {<X},
            where X isthe first letter in their name."""
        taken = []
        out = copy.deepcopy(self.board_repr)
        for p in players:
            rune = '<' + p.name[0].upper()
            pos_enc = self.pos_encodings[p.position]
            if pos_enc in taken:
                rune = '<<'
            taken += [pos_enc]

            out[pos_enc[0]][pos_enc[1]] = rune
        out_str = '\n'.join([''.join(row) for row in out])

        return out_str
